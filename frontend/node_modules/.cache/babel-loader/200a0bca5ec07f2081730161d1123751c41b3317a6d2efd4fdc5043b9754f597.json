{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import'./SignupPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const apiUrl=process.env.REACT_APP_API_URL;function SignupPage(){const[formData,setFormData]=useState({name:'',email:'',phone:'',password:'',confirmPassword:''});const[verificationCode,setVerificationCode]=useState('');const[isVerified,setIsVerified]=useState(false);const[signupComplete,setSignupComplete]=useState(false);const[passwordVisible,setPasswordVisible]=useState(false);const[resendCount,setResendCount]=useState(0);const handleInputChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleSignup=async()=>{if(formData.password!==formData.confirmPassword){alert('Passwords do not match');return;}if(!validatePassword(formData.password)){alert('Password does not meet the requirements');return;}try{const response=await axios.post(\"\".concat(apiUrl,\"/send-verification\"),formData);if(response.data.success){alert('Verification code sent to your email.');}else{alert('Failed to send verification code');}}catch(error){console.error('Error during signup:',error);alert('Failed to send verification code');}};const handleResendCode=()=>{setResendCount(resendCount+1);handleSignup();};const handleVerify=async()=>{try{const response=await axios.post(\"\".concat(apiUrl,\"/verify-code\"),{email:formData.email,code:verificationCode});console.log('user_id',formData.email);if(response.data.success){setIsVerified(true);const signupResponse=await axios.post(\"\".concat(apiUrl,\"/signup\"),formData);if(signupResponse.data.success){const session_response=await fetch('/yv-new-session',{method:'POST',headers:{'accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({\"user_id\":formData.email,\"topic\":''})});console.log('new session',session_response.data);setSignupComplete(true);}else{alert('Signup failed');}}else{alert('Verification code is incorrect');}}catch(error){console.error('Error during verification:',error);alert('Verification failed. Please try again.');}};const validatePassword=password=>{const passwordRegex=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$/;return passwordRegex.test(password);};return/*#__PURE__*/_jsxs(\"div\",{className:\"signup-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Signup\"}),!signupComplete?/*#__PURE__*/_jsxs(\"div\",{className:\"signup-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"Name\",value:formData.name,onChange:handleInputChange,className:\"signup-input\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Email\",value:formData.email,onChange:handleInputChange,className:\"signup-input\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"phone\",placeholder:\"Phone Number\",value:formData.phone,onChange:handleInputChange,className:\"signup-input\"}),/*#__PURE__*/_jsx(\"input\",{type:passwordVisible?\"text\":\"password\",name:\"password\",placeholder:\"Password\",value:formData.password,onChange:handleInputChange,className:\"signup-input\"}),/*#__PURE__*/_jsx(\"input\",{type:passwordVisible?\"text\":\"password\",name:\"confirmPassword\",placeholder:\"Confirm Password\",value:formData.confirmPassword,onChange:handleInputChange,className:\"signup-input\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"show-password-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"show-password\",checked:passwordVisible,onChange:()=>setPasswordVisible(!passwordVisible),className:\"show-password-checkbox\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"show-password\",className:\"show-password-label\",children:\"Show Password\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"verification-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Verification Code\",value:verificationCode,onChange:e=>setVerificationCode(e.target.value),className:\"verification-input\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSignup,className:\"send-verification-button\",children:\"Send Code\"})]}),resendCount>0&&/*#__PURE__*/_jsx(\"button\",{onClick:handleResendCode,className:\"resend-code-button\",children:\"Resend Code\"}),isVerified?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:\"Signup successful!\"})}):/*#__PURE__*/_jsx(\"button\",{onClick:handleVerify,className:\"signup-button\",children:\"Verify\"})]}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:\"Signup complete! You can now log in.\"})})]});}export default SignupPage;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","apiUrl","process","env","REACT_APP_API_URL","SignupPage","formData","setFormData","name","email","phone","password","confirmPassword","verificationCode","setVerificationCode","isVerified","setIsVerified","signupComplete","setSignupComplete","passwordVisible","setPasswordVisible","resendCount","setResendCount","handleInputChange","e","target","value","handleSignup","alert","validatePassword","response","post","concat","data","success","error","console","handleResendCode","handleVerify","code","log","signupResponse","session_response","fetch","method","headers","body","JSON","stringify","passwordRegex","test","className","children","type","placeholder","onChange","id","checked","htmlFor","onClick"],"sources":["/Users/connieshi/Documents/YoVenture_WebApp/frontend/src/pages/SignupPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport './SignupPage.css';\nconst apiUrl = process.env.REACT_APP_API_URL;\n\nfunction SignupPage() {\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    phone: '',\n    password: '',\n    confirmPassword: ''\n  });\n\n  const [verificationCode, setVerificationCode] = useState('');\n  const [isVerified, setIsVerified] = useState(false);\n  const [signupComplete, setSignupComplete] = useState(false);\n  const [passwordVisible, setPasswordVisible] = useState(false);\n  const [resendCount, setResendCount] = useState(0);\n\n  const handleInputChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const handleSignup = async () => {\n    if (formData.password !== formData.confirmPassword) {\n      alert('Passwords do not match');\n      return;\n    }\n\n    if (!validatePassword(formData.password)) {\n      alert('Password does not meet the requirements');\n      return;\n    }\n\n    try {\n      const response = await axios.post(`${apiUrl}/send-verification`, formData);\n      if (response.data.success) {\n        alert('Verification code sent to your email.');\n      } else {\n        alert('Failed to send verification code');\n      }\n    } catch (error) {\n      console.error('Error during signup:', error);\n      alert('Failed to send verification code');\n    }\n  };\n\n  const handleResendCode = () => {\n    setResendCount(resendCount + 1);\n    handleSignup();\n  };\n\n  const handleVerify = async () => {\n    try {\n      const response = await axios.post(`${apiUrl}/verify-code`, {\n        email: formData.email,\n        code: verificationCode,\n      });\n      console.log('user_id', formData.email)\n      if (response.data.success) {\n        setIsVerified(true);\n        const signupResponse = await axios.post(`${apiUrl}/signup`, formData);\n        if (signupResponse.data.success) {\n          const session_response = await fetch('/yv-new-session', {\n            method: 'POST',\n            headers: {\n              'accept': 'application/json',\n              'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n               \"user_id\": formData.email,\n               \"topic\": '',\n          }),\n          });\n          console.log('new session', session_response.data);\n          setSignupComplete(true);\n        } else {\n          alert('Signup failed');\n        }\n      } else {\n        alert('Verification code is incorrect');\n      }\n    } catch (error) {\n      console.error('Error during verification:', error);\n      alert('Verification failed. Please try again.');\n    }\n  };\n\n  const validatePassword = (password) => {\n    const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$/;\n    return passwordRegex.test(password);\n  };\n\n  return (\n    <div className=\"signup-container\">\n      <h2>Signup</h2>\n      {!signupComplete ? (\n        <div className=\"signup-form\">\n          <input\n            type=\"text\"\n            name=\"name\"\n            placeholder=\"Name\"\n            value={formData.name}\n            onChange={handleInputChange}\n            className=\"signup-input\"\n          />\n          <input\n            type=\"email\"\n            name=\"email\"\n            placeholder=\"Email\"\n            value={formData.email}\n            onChange={handleInputChange}\n            className=\"signup-input\"\n          />\n          <input\n            type=\"text\"\n            name=\"phone\"\n            placeholder=\"Phone Number\"\n            value={formData.phone}\n            onChange={handleInputChange}\n            className=\"signup-input\"\n          />\n          <input\n            type={passwordVisible ? \"text\" : \"password\"}\n            name=\"password\"\n            placeholder=\"Password\"\n            value={formData.password}\n            onChange={handleInputChange}\n            className=\"signup-input\"\n          />\n          <input\n            type={passwordVisible ? \"text\" : \"password\"}\n            name=\"confirmPassword\"\n            placeholder=\"Confirm Password\"\n            value={formData.confirmPassword}\n            onChange={handleInputChange}\n            className=\"signup-input\"\n          />\n          <div className=\"show-password-container\">\n            <input\n              type=\"checkbox\"\n              id=\"show-password\"\n              checked={passwordVisible}\n              onChange={() => setPasswordVisible(!passwordVisible)}\n              className=\"show-password-checkbox\"\n            />\n            <label htmlFor=\"show-password\" className=\"show-password-label\">Show Password</label>\n          </div>\n          <div className=\"verification-container\">\n            <input\n              type=\"text\"\n              placeholder=\"Verification Code\"\n              value={verificationCode}\n              onChange={(e) => setVerificationCode(e.target.value)}\n              className=\"verification-input\"\n            />\n            <button onClick={handleSignup} className=\"send-verification-button\">Send Code</button>\n          </div>\n          {resendCount > 0 && (\n            <button onClick={handleResendCode} className=\"resend-code-button\">Resend Code</button>\n          )}\n          {isVerified ? (\n            <div>\n              <p>Signup successful!</p>\n            </div>\n          ) : (\n            <button onClick={handleVerify} className=\"signup-button\">Verify</button>\n          )}\n        </div>\n      ) : (\n        <div>\n          <p>Signup complete! You can now log in.</p>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default SignupPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}